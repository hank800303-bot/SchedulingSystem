<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>排班系統</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Firebase（不載 analytics、不做匿名登入） -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
    import {
      getAuth, onAuthStateChanged, createUserWithEmailAndPassword,
      signInWithEmailAndPassword, signOut, signInWithCustomToken
    } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-auth.js";
    import {
      getFirestore, doc, setDoc, onSnapshot
    } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore.js";

    window.firebase = {
      initializeApp, getAuth, onAuthStateChanged,
      createUserWithEmailAndPassword, signInWithEmailAndPassword,
      signOut, signInWithCustomToken,
      getFirestore, doc, setDoc, onSnapshot
    };
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap');
    body { font-family: 'Noto Sans TC', sans-serif; }
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const {
      initializeApp, getAuth, onAuthStateChanged,
      createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, signInWithCustomToken,
      getFirestore, doc, setDoc, onSnapshot
    } = window.firebase;

    /* ===== 常數 / 樣式 ===== */
    const SHIFT_OPTIONS = ['早班','早+午班','午班','午+晚班','晚班','休','支援樹林','請假'];
    const SHIFT_TIMES = {
      '早班':'09:00 - 13:00 (4小時)',
      '早+午班':'09:00 - 17:00 (8小時)',
      '午班':'13:00 - 17:00 (4小時)',
      '午+晚班':'13:00 - 22:00 (9小時)',
      '晚班':'16:00 - 22:00 (6小時)',
      '休':'0 小時','請假':'0 小時','支援樹林':''
    };
    const SHIFT_HOURS = {'早班':4,'早+午班':8,'午班':4,'午+晚班':9,'晚班':6,'休':0,'請假':0,'支援樹林':0};
    const SHIFT_COLOR = {
      '早班':'bg-blue-200 text-blue-800','早+午班':'bg-indigo-200 text-indigo-800',
      '午班':'bg-teal-200 text-teal-800','午+晚班':'bg-purple-200 text-purple-800',
      '晚班':'bg-red-200 text-red-800','休':'bg-gray-400 text-gray-900',
      '請假':'bg-red-400 text-red-900','支援樹林':'bg-lime-200 text-lime-800',
    };

    /* ===== 共用工作區設定（跨人共用同一份） ===== */
    const APP_ID = 'zhenan-scheduler';
    const WORKSPACE_ID = localStorage.getItem('workspaceId') || 'main';

    /* ===== 你的 Firebase 設定（不使用 analytics） ===== */
    const firebaseConfig = {
      apiKey: "AIzaSyA0RjZ0RXst__qzv4e281LUOh2zdiMgmd0",
      authDomain: "zhenan-scheduler.firebaseapp.com",
      projectId: "zhenan-scheduler",
      storageBucket: "zhenan-scheduler.firebasestorage.app",
      messagingSenderId: "217165082111",
      appId: "1:217165082111:web:549c98dd09589029918bca"
    };
    const initialAuthToken = (typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null);

    /* ===== 小工具 ===== */
    const debounce = (fn, delay=500)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),delay);} };
    const getDaysInMonth = (y,m)=> new Date(y, m+1, 0).getDate();
    const getDayOfWeek = (y,m,d)=> ['日','一','二','三','四','五','六'][ new Date(y,m,d).getDay() ];
    const getShiftText = (shift)=> (typeof shift==='object' && shift)? '請假' : (shift||'');
    const getFullShiftDisplay = (shift)=>{
      const txt=getShiftText(shift), tm=SHIFT_TIMES[txt]||'';
      if(!txt) return '';
      if(txt==='請假' && typeof shift==='object') return '請假';
      return (<><div className="font-bold">{txt}</div><div className="text-xs">{tm}</div></>);
    };

    /* ===== App ===== */
    function App(){
      const [db,setDb] = useState(null);
      const [auth,setAuth] = useState(null);
      const [user,setUser] = useState(null);

      const [currentDate,setCurrentDate] = useState(new Date());
      const [staffs,setStaffs] = useState([]);
      const [schedule,setSchedule] = useState([]);
      const [newStaffName,setNewStaffName] = useState('');
      const [showDeleteModal,setShowDeleteModal] = useState(false);
      const [staffToDelete,setStaffToDelete] = useState(null);
      const [statusMessage,setStatusMessage] = useState('');
      const [error,setError] = useState('');
      const [email,setEmail] = useState(localStorage.getItem('rememberedEmail')||'');
      const [password,setPassword] = useState('');
      const [rememberEmail,setRememberEmail] = useState(!!localStorage.getItem('rememberedEmail'));

      /* 初始化 Firebase + Auth */
      useEffect(()=>{
        try{
          const app = initializeApp(firebaseConfig);
          const _db = getFirestore(app);
          const _auth = getAuth(app);
          setDb(_db); setAuth(_auth);

          const unsub = onAuthStateChanged(_auth, (cur)=> setUser(cur||null));
          if(initialAuthToken){
            signInWithCustomToken(_auth, initialAuthToken).catch(e=>console.error('custom token 登入失敗', e));
          }
          return ()=>unsub && unsub();
        }catch(e){ console.error('Firebase 初始化錯誤：', e); }
      },[]);

      /* Firestore 監聽（共用） */
      useEffect(()=>{
        if(!db || !user) return;
        const y=currentDate.getFullYear(), m=currentDate.getMonth()+1, monthId=`${y}-${String(m).padStart(2,'0')}`;
        const staffRef = doc(db, `artifacts/${APP_ID}/workspaces/${WORKSPACE_ID}/staffs/staffList`);
        const schedRef = doc(db, `artifacts/${APP_ID}/workspaces/${WORKSPACE_ID}/schedules/${monthId}`);

        const unsubStaff = onSnapshot(staffRef, s=>{
          setStaffs(s.exists() ? (s.data().names||[]) : []);
        }, err=>{
          console.error('讀取員工清單失敗：', err);
          setStatusMessage(`讀取員工清單失敗：${err.code||err.message}`);
        });

        const unsubSched = onSnapshot(schedRef, s=>{
          if(s.exists() && s.data().schedule){
            try{ setSchedule(JSON.parse(s.data().schedule)); }
            catch(e){ console.error('班表解析失敗', e); setSchedule([]); }
          }else{ setSchedule([]); }
        }, err=>{
          console.error('讀取班表失敗：', err);
          setStatusMessage(`讀取班表失敗：${err.code||err.message}`);
        });

        return ()=>{ unsubStaff(); unsubSched(); };
      },[db,user,currentDate]);

      /* 乾淨化 */
      const sanitizeSchedule = (data)=> Array.isArray(data)
        ? data.map(day=> Array.isArray(day)? day.map(s=> s===undefined?'':s) : [])
        : [];

      /* 立即儲存（手動用） */
      const saveScheduleNow = async (data)=>{
        if(!db || !user) return;
        try{
          const sanitized = sanitizeSchedule(data);
          const y=currentDate.getFullYear(), m=currentDate.getMonth()+1, monthId=`${y}-${String(m).padStart(2,'0')}`;
          const ref = doc(db, `artifacts/${APP_ID}/workspaces/${WORKSPACE_ID}/schedules/${monthId}`);
          await setDoc(ref, { schedule: JSON.stringify(sanitized), lastUpdated: new Date() }, { merge:true });
          setStatusMessage('班表已儲存！');
          setTimeout(()=>setStatusMessage(''), 1600);
        }catch(e){
          console.error('儲存班表失敗：', e);
          setStatusMessage(`儲存班表失敗：${e.code || e.message}`);
          setTimeout(()=>setStatusMessage(''), 2000);
        }
      };

      /* 自動儲存（防抖） */
      const saveScheduleDebounced = React.useMemo(()=> debounce(saveScheduleNow, 500), [db,user,currentDate,WORKSPACE_ID]);

      const manualSave = ()=> saveScheduleNow(schedule);

      /* 切換班別 */
      const handleShiftChange = (dayIdx, staffIdx)=>{
        const next=[...schedule];
        next[dayIdx]=next[dayIdx]||Array(staffs.length).fill('');
        const cur=next[dayIdx][staffIdx]||'';
        const curText=(typeof cur==='object')?'請假':cur;
        const ci=SHIFT_OPTIONS.indexOf(curText);
        const ni=(ci+1)%SHIFT_OPTIONS.length;
        const ns=SHIFT_OPTIONS[ni];
        next[dayIdx][staffIdx] = (ns==='請假')? {shift:'請假',type:'未備註',days:1,notes:''} : ns;
        setSchedule(next);
        saveScheduleDebounced(next);
      };

      /* 新增/刪除員工 —— 僅在成功寫入後顯示成功；失敗顯示錯誤碼；刪除視窗必關 */
      const handleAddStaff = async ()=>{
        if(!newStaffName.trim()) return;
        if(staffs.includes(newStaffName.trim())){
          setStatusMessage('該員工已存在！'); setTimeout(()=>setStatusMessage(''),1600); return;
        }
        const nextStaffs=[...staffs, newStaffName.trim()];
        setStaffs(nextStaffs);
        setSchedule(schedule.map(day=> [...day, '']));
        setNewStaffName('');
        if(!db || !user) return;
        try{
          const ref = doc(db, `artifacts/${APP_ID}/workspaces/${WORKSPACE_ID}/staffs/staffList`);
          await setDoc(ref, { names: nextStaffs }, { merge:true });
          setStatusMessage('新增員工成功！'); setTimeout(()=>setStatusMessage(''),1600);
        }catch(e){
          console.error('新增員工失敗：', e);
          setStatusMessage(`新增員工失敗：${e.code || e.message}`); setTimeout(()=>setStatusMessage(''),2000);
        }
      };

      const handleDeleteStaff = (name)=>{ setStaffToDelete(name); setShowDeleteModal(true); };

      const confirmDeleteStaff = async ()=>{
        const idx = staffs.indexOf(staffToDelete);
        const nextStaffs = staffs.filter(n=> n!==staffToDelete);
        const nextSchedule = schedule.map(day=> day.filter((_,i)=> i!==idx));

        // 先更新 UI（體感立即），再嘗試寫入
        setStaffs(nextStaffs);
        setSchedule(nextSchedule);

        if(!db || !user){
          setShowDeleteModal(false); setStaffToDelete(null);
          return;
        }

        try{
          const ref = doc(db, `artifacts/${APP_ID}/workspaces/${WORKSPACE_ID}/staffs/staffList`);
          await setDoc(ref, { names: nextStaffs }, { merge:true });
          await saveScheduleNow(nextSchedule);
          setStatusMessage('刪除員工成功！'); setTimeout(()=>setStatusMessage(''),1600);
        }catch(e){
          console.error('刪除員工失敗：', e);
          setStatusMessage(`刪除員工失敗：${e.code || e.message}`); setTimeout(()=>setStatusMessage(''),2000);
        }finally{
          // ★ 一定關閉視窗
          setShowDeleteModal(false);
          setStaffToDelete(null);
        }
      };

      /* 其它 */
      const handleMonthChange = (e)=>{ const [y,m]=e.target.value.split('-'); setCurrentDate(new Date(+y, +m-1, 1)); };
      const prevMonth = ()=> setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth()-1, 1));
      const nextMonth = ()=> setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth()+1, 1));
      const daysInMonth = getDaysInMonth(currentDate.getFullYear(), currentDate.getMonth());
      const getStats = ()=>{
        const stats = staffs.reduce((a,n)=>(a[n]={totalDays:0,totalHours:0,leaveDays:0}, a),{});
        (schedule||[]).forEach(day=>{
          if(!Array.isArray(day)) return;
          day.forEach((shift,i)=>{
            const name=staffs[i]; if(!name) return;
            const eff=(typeof shift==='object' && shift)? shift.shift : shift;
            if(SHIFT_HOURS[eff]>0){ stats[name].totalDays+=1; stats[name].totalHours+=SHIFT_HOURS[eff]; }
            else if(eff==='請假' && typeof shift==='object'){ stats[name].leaveDays+=(shift.days||1); }
            else if(eff==='請假'){ stats[name].leaveDays+=1; }
          });
        });
        return stats;
      };
      const stats = getStats();
      const generateMonthOptions = ()=>{
        const arr=[], today=new Date();
        for(let i=-12;i<=12;i++){
          const d=new Date(today.getFullYear(), today.getMonth()+i, 1);
          const y=d.getFullYear(), m=String(d.getMonth()+1).padStart(2,'0');
          arr.push({ value:`${y}-${m}`, label:`${y}年${d.getMonth()+1}月` });
        }
        return arr;
      };

      /* 登入/註冊/登出 */
      const doRegister = async ()=>{
        setError('');
        if(password.length<6){ setError('密碼長度必須至少為6個字元'); return; }
        try{
          await createUserWithEmailAndPassword(auth, email, password);
          rememberEmail? localStorage.setItem('rememberedEmail', email) : localStorage.removeItem('rememberedEmail');
          setStatusMessage('註冊成功！'); setTimeout(()=>setStatusMessage(''),1600);
        }catch(e){ setError(`${e.code||'auth/error'}: ${e.message}`); }
      };
      const doLogin = async ()=>{
        setError('');
        try{
          await signInWithEmailAndPassword(auth, email, password);
          rememberEmail? localStorage.setItem('rememberedEmail', email) : localStorage.removeItem('rememberedEmail');
          setStatusMessage('登入成功！'); setTimeout(()=>setStatusMessage(''),1600);
        }catch(e){ setError(`${e.code||'auth/error'}: ${e.message}`); }
      };
      const doLogout = async ()=>{
        setError('');
        try{ await signOut(auth); setStatusMessage('登出成功！'); setTimeout(()=>setStatusMessage(''),1600); }
        catch(e){ setError(`${e.code||'auth/error'}: ${e.message}`); }
      };

      /* 未登入畫面 */
      if(!user){
        return (
          <div className="min-h-screen flex items-center justify-center bg-gray-100 p-4">
            <div className="w-full max-w-md bg-white rounded-xl shadow-lg p-8 space-y-6">
              <h1 className="text-3xl font-bold text-center text-gray-900">排班系統登入</h1>
              {error && <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg">{error}</div>}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">電子郵件</label>
                <input type="email" value={email} onChange={e=>setEmail(e.target.value)}
                       className="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"/>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">密碼</label>
                <input type="password" value={password} onChange={e=>setPassword(e.target.value)}
                       className="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"/>
              </div>
              <label className="flex items-center gap-2 text-sm">
                <input type="checkbox" className="h-4 w-4 text-blue-600 rounded"
                       checked={rememberEmail} onChange={e=>setRememberEmail(e.target.checked)}/>
                記住我的電子郵件
              </label>
              <div className="flex flex-col gap-2">
                <button onClick={doLogin} className="w-full py-2 px-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600">登入</button>
                <button onClick={doRegister} className="w-full py-2 px-4 bg-green-500 text-white rounded-lg hover:bg-green-600">註冊</button>
              </div>
            </div>
          </div>
        );
      }

      /* 已登入畫面 */
      return (
        <div className="min-h-screen bg-gray-100 p-4 font-sans text-gray-800 antialiased">
          <header className="mb-8">
            <div className="flex justify-between items-center mb-4">
              <h1 className="text-4xl font-bold text-gray-900">排班系統</h1>
              <button onClick={doLogout} className="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">登出</button>
            </div>
            <p className="text-gray-600">目前登入信箱: {user.email || '（未提供）'}｜工作區：<span className="font-semibold">{WORKSPACE_ID}</span></p>
          </header>

          {statusMessage && (
            <div className="fixed top-4 left-1/2 -translate-x-1/2 bg-green-500 text-white px-6 py-2 rounded-full shadow-lg z-50">
              {statusMessage}
            </div>
          )}

          <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
            <div className="flex flex-col md:flex-row items-center justify-between gap-3">
              <div className="flex gap-2 w-full md:w-auto">
                <button onClick={()=>setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth()-1, 1))} className="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300">上一月</button>
                <select
                  value={`${currentDate.getFullYear()}-${String(currentDate.getMonth()+1).padStart(2,'0')}`}
                  onChange={(e)=>{ const [y,m]=e.target.value.split('-'); setCurrentDate(new Date(+y, +m-1, 1)); }}
                  className="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto"
                >
                  {Array.from({length:25},(_,i)=>i-12).map(off=>{
                    const d=new Date(); d.setMonth(d.getMonth()+off);
                    const v=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}`;
                    return <option key={v} value={v}>{d.getFullYear()}年{d.getMonth()+1}月</option>;
                  })}
                </select>
                <button onClick={()=>setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth()+1, 1))} className="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300">下一月</button>
              </div>
              <div className="flex items-center gap-2 w-full md:w-auto">
                <input type="text" value={newStaffName} onChange={e=>setNewStaffName(e.target.value)}
                       placeholder="新增員工姓名"
                       className="border rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-green-500"/>
                <button onClick={handleAddStaff} className="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 whitespace-nowrap">新增</button>
                <button onClick={manualSave} className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 whitespace-nowrap">手動儲存</button>
              </div>
            </div>

            <div className="mt-6 border-t pt-4">
              <h2 className="text-xl font-semibold mb-2">班別對應時間</h2>
              <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 text-sm">
                {Object.entries(SHIFT_TIMES).map(([k,v])=>(
                  <div key={k} className="p-3 bg-gray-50 rounded-lg border">
                    <span className="font-bold">{k}：</span><span>{v}</span>
                  </div>
                ))}
              </div>
            </div>
          </div>

          <div className="text-center my-6 text-blue-600 font-medium">點格子循環：早班 ⭢ 早+午班 ⭢ 午班 ⭢ 午+晚班 ⭢ 晚班 ⭢ 休 ⭢ 支援樹林 ⭢ 請假</div>

          <div className="overflow-x-auto scrollbar-hide">
            <div className="min-w-max bg-white rounded-xl shadow-lg overflow-hidden">
              <table className="w-full text-left">
                <thead className="bg-gray-200 sticky top-0 z-10">
                  <tr>
                    <th className="px-4 py-3 border-r-2 border-gray-300 whitespace-nowrap">日期</th>
                    {staffs.map((name, idx)=>(
                      <th key={idx} className="px-4 py-3 border-r-2 border-gray-300 whitespace-nowrap">
                        <div className="flex justify-between items-center">
                          <span>{name}</span>
                          <button onClick={()=>handleDeleteStaff(name)} className="text-red-500 hover:text-red-700" title="刪除">
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                              <path fillRule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 112 0v6a1 1 0 11-2 0V8z" clipRule="evenodd"/>
                            </svg>
                          </button>
                        </div>
                      </th>
                    ))}
                  </tr>
                </thead>
                <tbody>
                  {Array.from({length: getDaysInMonth(currentDate.getFullYear(), currentDate.getMonth())}).map((_, dayIdx)=>{
                    const day = dayIdx+1, dow = getDayOfWeek(currentDate.getFullYear(), currentDate.getMonth(), day);
                    return (
                      <tr key={dayIdx} className="border-t">
                        <td className="px-4 py-2 border-r-2 border-gray-300 whitespace-nowrap font-bold text-gray-700">
                          {currentDate.getMonth()+1}月{day}號 ({dow})
                        </td>
                        {staffs.map((_, staffIdx)=>{
                          const cur = schedule[dayIdx]?.[staffIdx] || '';
                          const cls = SHIFT_COLOR[(typeof cur==='object')?'請假':cur] || 'bg-white text-gray-500';
                          return (
                            <td key={staffIdx} className="px-2 py-2 border-r-2 border-gray-300 text-center">
                              <div onClick={()=>handleShiftChange(dayIdx, staffIdx)}
                                   className={`p-2 rounded-lg cursor-pointer hover:shadow-md transition ${cls}`}>
                                {getFullShiftDisplay(cur)}
                              </div>
                            </td>
                          );
                        })}
                      </tr>
                    );
                  })}
                </tbody>
                <tfoot className="bg-gray-2 00 sticky bottom-0 z-10">
                  <tr>
                    <td className="px-4 py-3 border-r-2 border-gray-300 font-bold whitespace-nowrap">總計</td>
                    {staffs.map((name, idx)=>{
                      // 即時計算（簡易）
                      const stats = { totalDays:0, totalHours:0, leaveDays:0 };
                      (schedule||[]).forEach(day=>{
                        if(!Array.isArray(day)) return;
                        const shift = day[idx];
                        const eff = (typeof shift==='object' && shift)? shift.shift : shift;
                        if(SHIFT_HOURS[eff]>0){ stats.totalDays+=1; stats.totalHours+=SHIFT_HOURS[eff]; }
                        else if(eff==='請假'){ stats.leaveDays+= (typeof shift==='object' && shift.days) ? shift.days : 1; }
                      });
                      return (
                        <td key={idx} className="px-4 py-3 border-r-2 border-gray-300 text-sm whitespace-nowrap">
                          <div>
                            <p>總天數: {stats.totalDays}</p>
                            <p>總時數: {stats.totalHours} 小時</p>
                            <p>請假天數: {stats.leaveDays}</p>
                          </div>
                        </td>
                      );
                    })}
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>

          {showDeleteModal && (
            <div className="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50">
              <div className="bg-white rounded-lg p-6 shadow-xl max-w-sm w-full text-center">
                <h3 className="text-lg font-bold mb-4">確認刪除</h3>
                <p className="mb-6">是否確認刪除員工 <span className="font-semibold text-red-600">"{staffToDelete}"</span>？此操作無法復原。</p>
                <div className="flex justify-center gap-3">
                  <button onClick={()=>{ setShowDeleteModal(false); setStaffToDelete(null); }} className="px-4 py-2 bg-gray-200 rounded-lg">取消</button>
                  <button onClick={confirmDeleteStaff} className="px-4 py-2 bg-red-500 text-white rounded-lg">確認刪除</button>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.render(<App/>, document.getElementById('root'));
  </script>
</body>
</html>
